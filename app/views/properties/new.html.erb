<%= render DialogComponent.new do |dialog| %>
  <% dialog.with_header(title: "Enter property manually") %>
  <% dialog.with_body do %>
    <div class="flex gap-4">
      <!-- Left sidebar with tabs -->
      <div class="flex flex-col gap-0.5 w-[156px] shrink-0">
        <div class="flex items-center px-3 py-2 rounded-lg bg-surface-inset text-sm font-medium text-primary">
          Overview
        </div>

        <span class="flex items-center px-3 py-2 rounded-lg text-sm font-medium text-subdued">
          Value
        </span>

        <div class="flex items-center px-3 py-2 rounded-lg text-sm font-medium text-subdued">
          Address
        </div>
      </div>

      <!-- Right content area with form -->
      <div class="flex-1">
        <%= styled_form_with model: @account, url: properties_path do |form| %>
          <%= form.hidden_field :accountable_type, value: "Property" %>
          <div class="flex flex-col gap-4 min-h-[320px]">
            <%= form.text_field :name,
                label: "Name",
                placeholder: "Vacation home",
                required: true,
                container_class: "border-primary shadow-none ring-4 ring-alpha-black-200" %>

            <%= form.select :subtype,
                Property::SUBTYPES.map { |k, v| [v[:long], k] },
                { prompt: "Select type", label: "Property type", required: true } %>

            <%= form.hidden_field :accountable_type, value: "Property" %>

            <%= form.fields_for :accountable do |property_form| %>
              <div class="flex items-center gap-2">
                <%= property_form.number_field :year_built,
                      label: "Year Built",
                      placeholder: "1990",
                      min: 1800,
                      max: Time.current.year %>
              </div>

              <div class="flex items-center gap-2">
                <%= property_form.number_field :area_value,
                      label: "Area",
                      placeholder: "1200",
                      min: 0 %>
                <%= property_form.select :area_unit,
                      [["Square Feet", "sqft"], ["Square Meters", "sqm"]],
                      { label: "Area Unit" } %>
              </div>
            <% end %>

            <%# Set in later step %>
            <%= form.hidden_field :balance, value: 0 %>
            <%= form.hidden_field :currency, value: Current.family.currency %>
          </div>

          <!-- Create button -->
          <div class="flex justify-end mt-4">
            <%= render ButtonComponent.new(
              text: "Create Property",
              variant: "primary",
            ) %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>
