<%# locals: (content:) %>

<div class="bg-gray-50 border border-gray-200 rounded-lg p-3 w-full text-gray-700 text-xs font-mono">
  <div class="flex items-center mb-1">
    <div class="mr-1"><%= icon("terminal", size: 14) %></div>
    <div class="font-semibold"><%= content.split("\n").first %></div>
  </div>
  <% if content.include?("```json") %>
    <% 
      json_start = content.index("```json")
      json_end = content.index("```", json_start + 7)
      if json_start && json_end
        json_content = content[(json_start + 7)...json_end].strip
        begin
                parsed_json = JSON.parse(json_content)
                formatted_json = JSON.pretty_generate(parsed_json)
              rescue
                formatted_json = json_content
              end
            end
          %>
    <div class="mt-2 overflow-x-auto">
      <pre class="text-xs"><%= formatted_json %></pre>
    </div>
  <% end %>
</div>